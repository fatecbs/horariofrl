!function(e,o){e.myApp={init:function(){var e=this;e.localJSONURL="app/res/horarios.json",e.onlineJSONURL="http://www.lipelopeslage.com.br/fatec/horarios.json",e.textUnfav="Deseja remover este curso, ciclo e semestre como favorito?",e.textFav="Deseja adicionar este curso, ciclo e semestre como favorito?<br>Caso escolha, este abrirá automaticamente na próxima vez que iniciar o aplicativo",e.favorito=localStorage&&localStorage.favorito?JSON.parse(localStorage.favorito):null,"none"!=intel.xdk.device.connection?e.doOnlineThing():e.doOfflineThing(),e.view.init()},doOnlineThing:function(){var e=this,i=this.onlineJSONURL;this.hasCache()?(this.useCache(),this.checkVersions()):o.get(i,function(o){localStorage.setItem("json",JSON.stringify(o)),e.json=o,e.view.bind()})},doOfflineThing:function(){var e=this,i=this.localJSONURL;this.hasCache()?e.useCache():o.get(i,function(o){localStorage.setItem("json",JSON.stringify(o)),e.json=JSON.parse(o),e.view.bind()}).fail(function(){alert("error buscando arquivo")})},checkVersions:function(){var e=this,i=this.onlineJSONURL,a=JSON.parse(localStorage.json);e.showWarning("Buscando atualizações...","success","search-update"),o.get(i,function(o){e.hideWarning("search-update"),a.versionID==o.versionID?(e.showWarning("Sua versão já está atualizada =)","success","search-update"),e.json=a):(e.showWarning("Houveram mudanças nos horários, não se preocupe, seu aplicativo já está atualizado =)","success","search-update"),e.json=o,localStorage.setItem("json",JSON.stringify(o))),setTimeout(function(){e.hideWarning("search-update")},2e3),e.view.bind()})},useCache:function(){this.json=JSON.parse(localStorage.json),this.view.bind()},hasCache:function(){return Boolean(localStorage.json)},showWarning:function(e,i,a){o("body").prepend("<div id='"+a+"' class='alert alert-"+i+"'>"+e+"</div>")},hideWarning:function(e){o("body").find(".alert#"+e).remove()}}}(window,jQuery);
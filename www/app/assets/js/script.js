!function(e,i){e.myApp={init:function(){var e=this,i="";e.localJSONURL="app/res/horarios.json",e.onlineJSONURL="http://www.lipelopeslage.com.br/fatec/horarios.json",e.textUnfav="Deseja remover este curso, ciclo e semestre como favorito?",e.textFav="Deseja adicionar este curso, ciclo e semestre como favorito?<br>Caso escolha, este abrirá automaticamente na próxima vez que iniciar o aplicativo",e.favorito=localStorage&&localStorage.favorito?JSON.parse(localStorage.favorito):null,"none"!=intel.xdk.device.connection?e.doOnlineThing():e.doOfflineThing(),e.view.init();var i="";document.addEventListener("intel.xdk.device.connection.update",function(){i!=intel.xdk.device.connection&&(i=intel.xdk.device.connection),setTimeout("intel.xdk.device.updateConnection();",2e3)},!1),setTimeout("intel.xdk.device.updateConnection();",2e3),document.addEventListener("intel.xdk.device.resume",function(){},!1)},doOnlineThing:function(){var e=this,n=this.onlineJSONURL;this.hasCache()?(this.useCache(),this.checkVersions()):i.get(n,function(i){localStorage.setItem("json",JSON.stringify(i)),e.json=i,e.view.fillCredits()})},doOfflineThing:function(){var e=this,n=this.localJSONURL;this.hasCache()?(e.useCache(),e.view.fillCredits()):i.get(n,function(i){localStorage.setItem("json",JSON.stringify(i)),e.json=JSON.parse(i),e.view.fillCredits()}).fail(function(){alert("error buscando arquivo")})},checkVersions:function(){var e=this,n=this.onlineJSONURL,o=JSON.parse(localStorage.json),t=2e3;e.showWarning("Buscando atualizações...","success","search-update"),i.get(n,function(i){e.hideWarning("search-update"),o.versionID==i.versionID?(e.showWarning("Sua versão já está atualizada =)","success","search-update"),e.json=o):(t=5e3,e.showWarning("Houveram mudanças nos horários, não se preocupe, seu aplicativo já está atualizado =)","success","search-update"),e.json=i,localStorage.setItem("json",JSON.stringify(i))),e.view.fillCredits(),setTimeout(function(){e.hideWarning("search-update")},t)})},useCache:function(){this.json=JSON.parse(localStorage.json)},hasCache:function(){return Boolean(localStorage.json)},showWarning:function(e,n,o){i("body").prepend("<div id='"+o+"' class='alert alert-"+n+"'>"+e+"</div>")},hideWarning:function(e){i("body").find(".alert#"+e).remove()}}}(window,jQuery);
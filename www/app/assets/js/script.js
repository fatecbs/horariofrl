!function(e,n){e.myApp={init:function(){var e=this,n="";e.localJSONURL="app/res/horarios.json",e.onlineJSONURL="http://www.lipelopeslage.com.br/fatec/horarios.json",e.textUnfav="Deseja remover este curso, ciclo e semestre como favorito?",e.textFav="Deseja adicionar este curso, ciclo e semestre como favorito?<br>Caso escolha, este abrirá automaticamente na próxima vez que iniciar o aplicativo",e.favorito=localStorage&&localStorage.favorito?JSON.parse(localStorage.favorito):null,"none"!=intel.xdk.device.connection?e.doOnlineThing():e.doOfflineThing(),e.view.init();var n="";document.addEventListener("intel.xdk.device.connection.update",function(){n!=intel.xdk.device.connection&&(n=intel.xdk.device.connection,alert("mudou status de rede pra:\n"+n)),setTimeout("intel.xdk.device.updateConnection();",2e3)},!1),setTimeout("intel.xdk.device.updateConnection();",2e3),document.addEventListener("intel.xdk.device.resume",function(){},!1)},doOnlineThing:function(){var e=this,o=this.onlineJSONURL;this.hasCache()?(this.useCache(),this.checkVersions()):n.get(o,function(n){localStorage.setItem("json",JSON.stringify(n)),e.json=n,e.view.bind()})},doOfflineThing:function(){var e=this,o=this.localJSONURL;this.hasCache()?e.useCache():n.get(o,function(n){localStorage.setItem("json",JSON.stringify(n)),e.json=JSON.parse(n),e.view.bind()}).fail(function(){alert("error buscando arquivo")})},checkVersions:function(){var e=this,o=this.onlineJSONURL,i=JSON.parse(localStorage.json);e.showWarning("Buscando atualizações...","success","search-update"),n.get(o,function(n){e.hideWarning("search-update"),i.versionID==n.versionID?(e.showWarning("Sua versão já está atualizada =)","success","search-update"),e.json=i):(e.showWarning("Houveram mudanças nos horários, não se preocupe, seu aplicativo já está atualizado =)","success","search-update"),e.json=n,localStorage.setItem("json",JSON.stringify(n))),setTimeout(function(){e.hideWarning("search-update")},2e3),e.view.bind()})},useCache:function(){this.json=JSON.parse(localStorage.json),this.view.bind()},hasCache:function(){return Boolean(localStorage.json)},showWarning:function(e,o,i){n("body").prepend("<div id='"+i+"' class='alert alert-"+o+"'>"+e+"</div>")},hideWarning:function(e){n("body").find(".alert#"+e).remove()}}}(window,jQuery);